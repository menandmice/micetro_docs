<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="How to handle external changes with Kea in Micetro by Men&amp;Mice" name="description" />
<meta content="KEA DHCP servers, KEA DHCP" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Handling external changes with Kea &mdash; Micetro by Men&amp;Mice - 10.2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Kea DHCP High Availability" href="dhcp_kea_ha.html" />
    <link rel="prev" title="ISC Kea DHCP" href="dhcp_kea.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Micetro by Men&Mice - 10.2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Micetro by Men&amp;Mice</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security_announcements.html">Security announcements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Contacting Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opensource.html">Open-source licenses</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Micetro Install Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../implementation/implementation.html">Implementation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/advanced_config.html">Advanced configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation/updates.html">Update Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Micetro User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="ui.html">Micetro user interface(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="folder_management.html">Folder management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns.html">DNS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dhcp.html">DHCP</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="dhcp_servers.html">DHCP servers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#new-dhcp-server">New DHCP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#edit-dhcp-server-name">Edit DHCP Server Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#toggle-dhcpv6-management-on-or-off">Toggle DHCPv6 Management on or off</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#inherited-access-management-console">Inherited Access (Management Console)</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#remove">Remove</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#options">Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#properties-management-console">Properties (Management Console)</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp_servers.html#advanced-isc-kea-server-properties">Advanced ISC Kea Server Properties</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="dhcp_servers.html#reload-scope-list-management-console">Reload Scope List (Management Console)</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="dhcp_windows.html">Microsoft DHCP</a></li>
<li class="toctree-l4"><a class="reference internal" href="dhcp_windows.html#reconcile-scopes">Reconcile Scopes</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="dhcp_kea.html">ISC Kea DHCP</a></li>
<li class="toctree-l4"><a class="reference internal" href="dhcp_isc.html">ISC DHCP</a></li>
<li class="toctree-l4"><a class="reference internal" href="dhcp_isc.html#restart">Restart</a></li>
<li class="toctree-l4"><a class="reference internal" href="dhcp_cisco.html">Cisco DHCP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dhcp_scopes.html">DHCP scopes</a></li>
<li class="toctree-l2"><a class="reference internal" href="webapp_edit_dhcp.html">Edit DHCP Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ipam.html">IP address management</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices.html">Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="active_directory.html">AD Sites and Subnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="automation.html">Automation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Micetro Admin Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_system_settings.html">System Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/access_control.html">Access control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_license.html">License Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/webapp_admin.html">Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/snmp_profiles.html">SNMP profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_custom_properties.html">Custom Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_schedule_scripts.html">Scheduled Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_maintenance.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/appliance_management.html">Appliance management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/caching_appliance.html">Caching DNS Servers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/reference.html">Micetro reference articles</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Micetro by Men&Mice - 10.2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="dhcp.html">DHCP</a></li>
          <li class="breadcrumb-item"><a href="dhcp_servers.html">DHCP servers</a></li>
          <li class="breadcrumb-item"><a href="dhcp_kea.html">ISC Kea DHCP</a></li>
      <li class="breadcrumb-item active">Handling external changes with Kea</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/guides/user-manual/dhcp_kea_external_changes.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="handling-external-changes-with-kea">
<span id="dhcp-kea-external-changes"></span><h1>Handling external changes with Kea<a class="headerlink" href="#handling-external-changes-with-kea" title="Link to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You should always edit the Kea DHCP server’s configuration file through Micetro to ensure that the synchronization between Micetro and the Kea DHCP server is instant and all changes will immediately updated in the database and reflected in the user interface.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All changes made to the configuration file through Micetro will automatically and instantly be propagated to the secondary/backup servers in a <a class="reference internal" href="dhcp_kea_ha.html#dhcp-kea-ha"><span class="std std-ref">Kea DHCP High Availability</span></a> setup.</p>
</div>
<p>Micetro uses the in-memory configuration of the Kea server. If external changes must be made to a Kea DHCP server’s configuration file, the changes to the configuration file aren’t processed by the server until forced to parse the file to its <em>in-memory</em> structure, so Micetro can be made aware of these changes.</p>
<p>To make the Kea DHCP server process changes to its configuration file a call has to be made to either the <a class="reference internal" href="dhcp_kea.html#kea-control-agent"><span class="std std-ref">Kea Control Agent</span></a> or the socket that Kea uses.</p>
<p>An example of the call to the control-agent:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{ &quot;command&quot;: &quot;config-reload&quot;, &quot;service&quot;: [ &quot;dhcp4&quot; ] }&#39;</span><span class="w"> </span>localhost:8000
</pre></div>
</div>
<p>If successful, the result looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="p">{</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Configuration successful.&quot;</span> <span class="p">}</span> <span class="p">]</span>
</pre></div>
</div>
<p>After the changes to the configuration file have been accepted and parsed into the Kea DHCP servers memory structure, users can display them in Micetro through the <span class="guilabel">Edit Configuration</span> action for the server.</p>
<a class="reference internal image-reference" href="../../_images/kea-edit-config.png"><img alt="../../_images/kea-edit-config.png" class="align-center" src="../../_images/kea-edit-config.png" style="width: 90%;" /></a>
<section id="resolving-conflicts">
<h2>Resolving conflicts<a class="headerlink" href="#resolving-conflicts" title="Link to this heading"></a></h2>
<p>Micetro synchronizes all data between the Kea DHCP servers and its database regularly. Setting the <code class="docutils literal notranslate"><span class="pre">DHCPSyncInterval</span></code> variable in Central’s <code class="docutils literal notranslate"><span class="pre">preferences.cfg</span></code> overwrites the default value of 15 minutes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The values set for <code class="docutils literal notranslate"><span class="pre">DHCPSyncInterval</span></code> are in seconds.</p>
</div>
<p>Synchronization occurs based on the configuration to update the database and the user interface, but to prevent overwriting external changes before synchronization is complete, Micetro will check for conflicts with the Kea server’s in-memory configuration before writing the changes to the server.</p>
<p>For example, if a scope with subnet 1.3.3.0/29 is manually added to the Kea DHCP servers configuration file, and <code class="docutils literal notranslate"><span class="pre">config-reload</span></code> is successfully called, the Kea server will have parsed the change and added the scope to its in-memory data structure. Synchronization with Micetro may not have been executed yet, and the externally added scope is not yet visible in the user interface. However, if another user would try to  add the same or otherwise conflicting scope through Micetro, they will receive a message stating “<em>A scope with address “1.3.3.0” already exists on the server</em>” as the configuration file is validated against the Kea DHCP servers in-memory config before each change is applied.</p>
</section>
<section id="external-changes-and-kea-high-availability">
<h2>External changes and Kea high availability<a class="headerlink" href="#external-changes-and-kea-high-availability" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="dhcp_kea_ha.html#dhcp-kea-ha-external-changes"><span class="std std-ref">Making external changes to Kea servers in high availability</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dhcp_kea.html" class="btn btn-neutral float-left" title="ISC Kea DHCP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dhcp_kea_ha.html" class="btn btn-neutral float-right" title="Kea DHCP High Availability" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Men&amp;Mice.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>