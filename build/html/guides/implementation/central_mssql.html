<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="Configuring Microsoft SQL Server as the database backend for Micetro by Men&amp;Mice" name="description" />
<meta content="Microsoft SQL Server, Micetro, database, DDI database" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Microsoft SQL Server &mdash; Micetro by Men&amp;Mice - 10.2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PostgreSQL" href="central_postgresql.html" />
    <link rel="prev" title="SQLite" href="central_sqlite.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Micetro by Men&Mice - 10.2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Micetro by Men&amp;Mice</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security_announcements.html">Security announcements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Contacting Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opensource.html">Open-source licenses</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Micetro Install Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="implementation.html">Implementation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="installation.html">Installation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="firewall_ports.html">Networking requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="binaries.html">Micetro by Men&amp;Mice components</a></li>
<li class="toctree-l3"><a class="reference internal" href="config_files.html">Location of important config and log files</a></li>
<li class="toctree-l3"><a class="reference internal" href="install_central.html">Men&amp;Mice Central</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="central_database.html">Database backend</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="central_sqlite.html">SQLite</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Microsoft SQL Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="central_postgresql.html">PostgreSQL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="install_console.html">Management Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="install_controllers.html">Server controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cloud.html">Cloud integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="install_webapp.html">Web Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#deploying-micetro-on-azure">Deploying Micetro on Azure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_config.html">Advanced configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="updates.html">Update Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Micetro User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/introduction.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/ui.html">Micetro user interface(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/folder_management.html">Folder management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/dns.html">DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/dhcp.html">DHCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/ipam.html">IP address management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/devices.html">Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/active_directory.html">AD Sites and Subnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/automation.html">Automation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Micetro Admin Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_system_settings.html">System Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/access_control.html">Access control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_license.html">License Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/webapp_admin.html">Admin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/snmp_profiles.html">SNMP profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_custom_properties.html">Custom Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_schedule_scripts.html">Scheduled Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/admin_maintenance.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/appliance_management.html">Appliance management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-manual/caching_appliance.html">Caching DNS Servers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/reference.html">Micetro reference articles</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Micetro by Men&Mice - 10.2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="implementation.html">Implementation Guide</a></li>
          <li class="breadcrumb-item"><a href="installation.html">Installation</a></li>
          <li class="breadcrumb-item"><a href="central_database.html">Database backend</a></li>
      <li class="breadcrumb-item active">Microsoft SQL Server</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/guides/implementation/central_mssql.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="microsoft-sql-server">
<span id="central-mssql"></span><h1>Microsoft SQL Server<a class="headerlink" href="#microsoft-sql-server" title="Link to this heading"></a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>We recommend that the network latency between the SQL server and M&amp;M Central is <strong>no more than 5 ms</strong>. Otherwise, the performance of M&amp;M in conjunction with SQL Server can’t be guaranteed to be acceptable.
We recommend that the SQL Server database is managed and maintained by a database administrator (DBA).</p>
</div>
<section id="setting-up-the-database">
<h2>Setting up the Database<a class="headerlink" href="#setting-up-the-database" title="Link to this heading"></a></h2>
<p>Micetro requires that a blank database is created on the database server, with the collation SQL_Latin1_General_CP1_CS_AS, and a login (Windows or SQL server authenticated) that has db_owner access to that database and an effective default schema of mmCentral.</p>
<p>The <a class="reference external" href="https://github.com/menandmice/micetro_docs/blob/latest/scripts/CreateDatabase.sql">CreateDatabase.sql</a> script is a suggestion for the database and database server setup. Please note that this script also configures the SQL server itself, which is unnecessary and undesirable in most cases. Therefore, review the script with your database administrator and only run appropriate parts of it.</p>
<p>Before you run the script please go through the script and change the necessary entries accordingly. This includes path strings (default C:/Data) and very important also the password, which is set by default to “1234” in the script!</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The script is preconfigured for an 8 core processor machine, i.e. as a best practice we recommend to create for each processor core one temp file. If you have only a two core machine please comment out the last 6 temp file creation commands in the script.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>The script will, without confirmation, drop the existing database using the name “mmsuite”! Make a manual backup to avoid possible data loss.</p>
</div>
<p>Subsequently the script will create:</p>
<ul class="simple">
<li><p>a user “mmSuiteDBUser” with the password that you have inserted in the script.</p></li>
<li><p>an empty database with the name “mmsuite” and the following collation:
<code class="docutils literal notranslate"><span class="pre">COLLATE</span> <span class="pre">SQL_Latin1_General_CP1_CS_AS</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For further details take a look at the <code class="docutils literal notranslate"><span class="pre">CreateDatabase.sql</span></code> script.</p>
</div>
<p>Configuring the connection parameters</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you’re configuring MS SQL on a dedicated server, make sure to <a class="reference external" href="https://docs.microsoft.com/en-us/sql/database-engine/configure-windows/enable-or-disable-a-server-network-protocol?redirectedfrom=MSDN&amp;view=sql-server-ver15">enable the TCP/IP protocol with the SQL Configuration Manager</a>.</p>
</div>
<div class="admonition warning" id="central-mssql-windows">
<p class="admonition-title">Warning</p>
<p>An ODBC driver will need to be <a class="reference external" href="https://docs.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server?view=sql-server-ver15">installed on the Central server to be able to use Microsoft SQL Server</a>.</p>
</div>
<section id="men-mice-central-running-on-windows">
<h3>Men&amp;Mice Central running on Windows<a class="headerlink" href="#men-mice-central-running-on-windows" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To use Windows Authentication with Micetro and Microsoft SQL Server, make sure Men&amp;Mice Central is running under an Active Directory service account that is a member of the local administrators group.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">preferences.cfg</span></code> file in the data directory contains (beside the fingerprint of Central, i.e. the “password” XML-tag) four additional XML tags: <code class="docutils literal notranslate"><span class="pre">database</span></code>, <code class="docutils literal notranslate"><span class="pre">databaseserver</span></code>, <code class="docutils literal notranslate"><span class="pre">databaseusername</span></code> and <code class="docutils literal notranslate"><span class="pre">databasepassword</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">preferences.cfg</span></code> file for normal user/password authentication should look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">password</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;plaintext:PASSWORD&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">database</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;MSSQL&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">databaseserver</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;&lt;name or ip of the SQL server&gt;\&lt;name of instance, e.g. SQLEXPRESS&gt;@,&lt;name of database, e.g. micetro&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">databaseusername</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;mmSuiteDBUser&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">databasepassword</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;plaintext:DBPASSWORD&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">plaintext:</span></code> directive in the password inputs allows you to enter the passwords in plaintext, which Central will automatically encrypt and replace with the hash during first startup.</p>
<p>An example <code class="docutils literal notranslate"><span class="pre">preferences.cfg</span></code> file for the Windows Authentication method should look like (<code class="docutils literal notranslate"><span class="pre">databaseusername</span></code> tag must be present and the value attribute must be set to empty string):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">password</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;the fingerprint hash&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">database</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;MSSQL&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">databaseserver</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;&lt;name or ip of the SQL server&gt;\&lt;name of instance, e.g. SQLEXPRESS&gt;@,&lt;name of database, e.g. mmsuite&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">databaseusername</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">/&gt;</span>
</pre></div>
</div>
<p>Restart Central and verify it’s running. If the database connection fails, the service will fail to start with the appropriate error message.</p>
</section>
<section id="men-mice-central-running-on-linux">
<h3>Men&amp;Mice Central running on Linux<a class="headerlink" href="#men-mice-central-running-on-linux" title="Link to this heading"></a></h3>
<p>Navigate to the data directory of the Men&amp;Mice Central, usually located in <code class="docutils literal notranslate"><span class="pre">/var/mmsuite/mmcentral</span></code>.</p>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">preferences.cfg</span></code> file with in that directory with the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">Database</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;MSSQL&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">DatabaseServer</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;ip/dns name of SQL server&gt;&lt;,port&gt;\&lt;Instance name&gt;@&lt;Database name&gt;&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">DatabaseUsername</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;mmSuiteDBUser&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">DatabasePassword</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;plaintext:&lt;your password here&gt;&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">DatabasePassword</span></code> value is prefixed by <code class="docutils literal notranslate"><span class="pre">plaintext:</span></code>, it will be replaced by Men&amp;Mice Central for a password hash during start up.</p>
</div>
</section>
</section>
<section id="connecting-to-the-ms-sql-database">
<h2>Connecting to the MS SQL database<a class="headerlink" href="#connecting-to-the-ms-sql-database" title="Link to this heading"></a></h2>
<p>Restarting the Men&amp;Mice Central service with the new preferences file should connect the Men&amp;Mice Central to your freshly created database. The Men&amp;Mice Central creates the database schema (tables…) during the first connection.</p>
<p>Since the database was freshly created you can now follow the normal installation procedure.</p>
<p>Restart Central and verify it’s running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>restart<span class="w"> </span>mmcentral
systemctl<span class="w"> </span>status<span class="w"> </span>mmcentral
</pre></div>
</div>
<p>If the database connection fails, the service will fail to start with the appropriate error message.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="central_sqlite.html" class="btn btn-neutral float-left" title="SQLite" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="central_postgresql.html" class="btn btn-neutral float-right" title="PostgreSQL" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Men&amp;Mice.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>